#include<iostream>
#include<iomanip>


using namespace std;
const int SEATNO=14,ROWNO=10,PRICE=12,VIPPRICE=20;
const char OCCUPIED='X', VACANT='*';
const char ROW[10]={'A','B','C','D','E','F','G','H','I','J'};

char map[10][14];
int priceTotal=0;


void iniSeats();
void displaySeats();
void promptSeats();
void bookSeats(int,int);
int printTotal(char);

int main(){
	iniSeats();
	displaySeats();
	promptSeats();
}

void iniSeats(){
	for(int i=0;i<ROWNO;i++){
		for(int ii=0;ii<SEATNO;ii++){  //nested loop to initialise all char in array as '*'
			map[i][ii]=VACANT;
		}
	}
}

void displaySeats(){
	cout<<left<<setw(4)<<"";
	for(int i=0;i<SEATNO;i++){              
		cout<<left<<setw(4)<<(i+1);   //loop to display int 1-14
	}
	cout<<endl;
	for(int i=0;i<ROWNO;i++){        
		cout<<left<<setw(4)<<ROW[i];     //display char 'A'-'J'
		for(int ii=0;ii<SEATNO;ii++){   //nested loop to display contents of map[][] array in appropriate form
		cout<<left<<setw(4)<<map[i][ii];
	    }
	cout<<endl;
	}
	cout<<endl;
	cout<<"Total Price: "<<priceTotal<<endl;
	
	
}

void promptSeats(){
	char rowNo;
	int seatNo,rowNoInt;
	cout<<left<<setw(25)<<"please enter seat row(A-J):";
	cin>>rowNo;
	rowNoInt=static_cast<int>(rowNo);          
	if(rowNoInt<=106&&rowNoInt>=97){
		rowNoInt-=32;                         //detects and turns lower case to upper case
	}
	if(rowNoInt>74||rowNoInt<65){
	   cout<<"invalid value entered"<<endl;      //filter to ensure only two ranges of values can be valid
	   promptSeats();	
	}
	do{
		cout<<left<<setw(25)<<"please enter seat number(1-14):";
	    cin>>seatNo;
	    if(seatNo<1||seatNo>14){
	    	cout<<"invalid Value entered"<<endl;      //filter and do while loop to prevent user having to reset row 
		}
	}while(seatNo<1||seatNo>14);
	
	rowNoInt-=65;                                    //turns char to int value to 0+position in alphabates to be used to identify position in array
	
	if(map[rowNoInt][(seatNo-1)]==VACANT){
		bookSeats(rowNoInt,seatNo);
		cout<<"seat available, booking sucessful"<<endl;
	    printTotal(rowNo);                              //checks to see if a seat is vacant if yes, total price is incremented, if no booking is rejected
	     system("CLS");
	    displaySeats();
	    promptSeats();
	}
	else{
		system("CLS");
		displaySeats();
		cout<<"seat is taken, please pick another seat"<<endl;
		promptSeats();
	}
}

void bookSeats(int rowNoInt,int seatNo){
	seatNo--;
	map[rowNoInt][seatNo]=OCCUPIED;               //books seats by changing the char in the specified position
	
}

int printTotal(char rowNo){                        //ECLAIRER 
	if(rowNo == 'A'||rowNo == 'B'){
		priceTotal+=VIPPRICE;
	}                                             //increments the total price accordingly
	else{
		priceTotal+=PRICE;
	}
}
